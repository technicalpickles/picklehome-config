media_player:
  - platform: universal
    name: Media Room TV
    children:
      - media_player.apple_tv_2
    state_template: >
      {%- if is_state('remote.harmony_hub', 'off') %}
        idle
      {%- else %}
        {%- if is_state_attr('remote.harmony_hub', 'current_activity', 'Watch Apple TV') %}
          {{ states('media_player.apple_tv_2') }}
        {%- endif %}
      {%- endif %}
    commands:
      turn_off:
        service: remote.turn_off
        entity_id: remote.harmony_hub
      turn_on:
        service: remote.turn_on
        entity_id: remote.harmony_hub
switch:
  - platform: template
    switches:
      apple_tv:
        friendly_name: Apple TV
        value_template: >
           {%- if is_state_attr('remote.harmony_hub', 'current_activity', 'Watch Apple TV') %}
             on
           {%- else %}
             off
           {%- endif %}
        turn_on:
          - service: remote.turn_on
            entity_id: remote.harmony_hub
            data:
              activity: Watch Apple TV
        turn_off:
          - service: remote.turn_off
            entity_id: remote.harmony_hub
      directv:
        friendly_name: DirecTV
        value_template: >
           {%- if is_state_attr('remote.harmony_hub', 'current_activity', 'Watch TV') %}
             on
           {%- else %}
             off
           {%- endif %}
        turn_on:
          - service: remote.turn_on
            entity_id: remote.harmony_hub
            data:
              activity: Watch TV
        turn_off:
          - service: remote.turn_off
            entity_id: remote.harmony_hub
      smart_tv:
        friendly_name: Smart TV
        value_template: >
           {%- if is_state_attr('remote.harmony_hub', 'current_activity', 'Watch Smart TV') %}
             on
           {%- else %}
             off
           {%- endif %}
        turn_on:
          - service: remote.turn_on
            entity_id: remote.harmony_hub
            data:
              activity: Watch Smart TV
        turn_off:
          - service: remote.turn_off
            entity_id: remote.harmony_hub
      nintendo_switch:
        friendly_name: Nintendo Switch
        value_template: >
           {%- if is_state_attr('remote.harmony_hub', 'current_activity', 'Play Switch') %}
             on
           {%- else %}
             off
           {%- endif %}
        turn_on:
          - service: remote.turn_on
            entity_id: remote.harmony_hub
            data:
              activity: Play Switch
        turn_off:
          - service: remote.turn_off
            entity_id: remote.harmony_hub
